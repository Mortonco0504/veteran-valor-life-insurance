<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veteran Valor Analytics Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            color: #333;
            line-height: 1.6;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #1e40af;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #1e40af;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #059669;
            margin-bottom: 10px;
        }

        .stat-change {
            font-size: 0.9rem;
            color: #059669;
            font-weight: 500;
        }

        .stat-change.negative {
            color: #dc2626;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .chart-container h3 {
            color: #1e40af;
            font-size: 1.3rem;
            margin-bottom: 20px;
        }

        .chart {
            height: 300px;
            background: #f8fafc;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
        }

        .data-table {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .data-table h3 {
            color: #1e40af;
            font-size: 1.3rem;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
        }

        .refresh-btn {
            background: #1e40af;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background 0.3s ease;
        }

        .refresh-btn:hover {
            background: #1e3a8a;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #6b7280;
        }

        .icon {
            width: 20px;
            height: 20px;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>üìä Veteran Valor Analytics Dashboard</h1>
            <p>Real-time visitor statistics and website performance metrics</p>
            <button class="refresh-btn" onclick="refreshData()">
                üîÑ Refresh Data
            </button>
        </div>

        <div class="loading" id="loading">
            Loading analytics data...
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>
                    <span class="icon">üë•</span>
                    Total Visitors
                </h3>
                <div class="stat-value" id="totalVisitors">-</div>
                <div class="stat-change" id="visitorsChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üì±</span>
                    Mobile Visitors
                </h3>
                <div class="stat-value" id="mobileVisitors">-</div>
                <div class="stat-change" id="mobileChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üñ•Ô∏è</span>
                    Desktop Visitors
                </h3>
                <div class="stat-value" id="desktopVisitors">-</div>
                <div class="stat-change" id="desktopChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üìä</span>
                    Bounce Rate
                </h3>
                <div class="stat-value" id="bounceRate">-</div>
                <div class="stat-change" id="bounceChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">‚è±Ô∏è</span>
                    Avg. Session Duration
                </h3>
                <div class="stat-value" id="sessionDuration">-</div>
                <div class="stat-change" id="durationChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üìÑ</span>
                    Pages per Session
                </h3>
                <div class="stat-value" id="pagesPerSession">-</div>
                <div class="stat-change" id="pagesChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üéØ</span>
                    Form Submissions
                </h3>
                <div class="stat-value" id="formSubmissions">-</div>
                <div class="stat-change" id="formChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üìû</span>
                    Phone Calls
                </h3>
                <div class="stat-value" id="phoneCalls">-</div>
                <div class="stat-change" id="phoneChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üñ±Ô∏è</span>
                    Button Clicks
                </h3>
                <div class="stat-value" id="buttonClicks">-</div>
                <div class="stat-change" id="clicksChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üìç</span>
                    Top Traffic Source
                </h3>
                <div class="stat-value" id="topSource">-</div>
                <div class="stat-change" id="sourceChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üåç</span>
                    Top Location
                </h3>
                <div class="stat-value" id="topLocation">-</div>
                <div class="stat-change" id="locationChange">Loading...</div>
            </div>

            <div class="stat-card">
                <h3>
                    <span class="icon">üì±</span>
                    Device Breakdown
                </h3>
                <div class="stat-value" id="deviceBreakdown">-</div>
                <div class="stat-change" id="deviceChange">Loading...</div>
            </div>
        </div>

        <div class="chart-container">
            <h3>üìà Visitor Trends (Last 30 Days)</h3>
            <div class="chart" id="visitorChart">
                Chart will be loaded here...
            </div>
        </div>

        <div class="chart-container">
            <h3>üéØ Conversion Funnel</h3>
            <div class="chart" id="funnelChart">
                Funnel chart will be loaded here...
            </div>
        </div>

        <div class="data-table">
            <h3>üìã Recent Activity</h3>
            <table>
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Event</th>
                        <th>Page</th>
                        <th>Device</th>
                        <th>Location</th>
                    </tr>
                </thead>
                <tbody id="activityTable">
                    <tr>
                        <td colspan="5">Loading recent activity...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="data-table">
            <h3>üåç Top Traffic Sources</h3>
            <table>
                <thead>
                    <tr>
                        <th>Source</th>
                        <th>Visitors</th>
                        <th>Bounce Rate</th>
                        <th>Avg. Session</th>
                        <th>Conversions</th>
                    </tr>
                </thead>
                <tbody id="sourcesTable">
                    <tr>
                        <td colspan="5">Loading traffic sources...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="data-table">
            <h3>üì± Device Performance</h3>
            <table>
                <thead>
                    <tr>
                        <th>Device</th>
                        <th>Visitors</th>
                        <th>Bounce Rate</th>
                        <th>Avg. Session</th>
                        <th>Conversion Rate</th>
                    </tr>
                </thead>
                <tbody id="deviceTable">
                    <tr>
                        <td colspan="5">Loading device data...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Analytics Dashboard JavaScript
        class AnalyticsDashboard {
            constructor() {
                this.data = {};
                this.init();
            }

            async init() {
                await this.loadAnalyticsData();
                this.setupRealTimeTracking();
                this.updateDashboard();
            }

            async loadAnalyticsData() {
                try {
                    // Simulate loading analytics data
                    // In real implementation, this would fetch from Google Analytics API
                    this.data = {
                        visitors: {
                            total: 15420,
                            mobile: 8920,
                            desktop: 6500,
                            change: '+12.5%'
                        },
                        engagement: {
                            bounceRate: '34.2%',
                            sessionDuration: '2m 45s',
                            pagesPerSession: 3.2,
                            bounceChange: '-5.2%',
                            durationChange: '+8.1%',
                            pagesChange: '+12.3%'
                        },
                        conversions: {
                            formSubmissions: 1247,
                            phoneCalls: 892,
                            buttonClicks: 3456,
                            formChange: '+15.2%',
                            phoneChange: '+8.7%',
                            clicksChange: '+22.1%'
                        },
                        traffic: {
                            topSource: 'Google Ads',
                            topLocation: 'California',
                            deviceBreakdown: 'Mobile 58%',
                            sourceChange: '+18.3%',
                            locationChange: '+5.2%',
                            deviceChange: '+12.1%'
                        },
                        recentActivity: [
                            { time: '2 min ago', event: 'Form Submission', page: '/', device: 'Mobile', location: 'Texas' },
                            { time: '5 min ago', event: 'Phone Call', page: '/', device: 'Desktop', location: 'California' },
                            { time: '8 min ago', event: 'Button Click', page: '/', device: 'Mobile', location: 'Florida' },
                            { time: '12 min ago', event: 'Page View', page: '/', device: 'Desktop', location: 'New York' },
                            { time: '15 min ago', event: 'Form Submission', page: '/', device: 'Mobile', location: 'Texas' }
                        ],
                        trafficSources: [
                            { source: 'Google Ads', visitors: 8920, bounceRate: '28.5%', avgSession: '3m 12s', conversions: 892 },
                            { source: 'Organic Search', visitors: 3450, bounceRate: '42.1%', avgSession: '2m 45s', conversions: 234 },
                            { source: 'Direct', visitors: 2150, bounceRate: '38.7%', avgSession: '2m 18s', conversions: 89 },
                            { source: 'Social Media', visitors: 900, bounceRate: '51.2%', avgSession: '1m 45s', conversions: 32 }
                        ],
                        devicePerformance: [
                            { device: 'Mobile', visitors: 8920, bounceRate: '31.2%', avgSession: '2m 18s', conversionRate: '8.5%' },
                            { device: 'Desktop', visitors: 6500, bounceRate: '38.7%', avgSession: '3m 45s', conversionRate: '12.3%' },
                            { device: 'Tablet', visitors: 1200, bounceRate: '35.4%', avgSession: '2m 52s', conversionRate: '9.1%' }
                        ]
                    };
                } catch (error) {
                    console.error('Error loading analytics data:', error);
                }
            }

            setupRealTimeTracking() {
                // Set up real-time tracking for new events
                if (typeof gtag !== 'undefined') {
                    // Track real-time events
                    this.trackRealTimeEvents();
                }
            }

            trackRealTimeEvents() {
                // Track form submissions
                const forms = document.querySelectorAll('form');
                forms.forEach(form => {
                    form.addEventListener('submit', () => {
                        this.trackEvent('form_submission');
                    });
                });

                // Track phone calls
                const phoneLinks = document.querySelectorAll('a[href^="tel:"]');
                phoneLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        this.trackEvent('phone_call');
                    });
                });

                // Track button clicks
                const buttons = document.querySelectorAll('button, .btn');
                buttons.forEach(button => {
                    button.addEventListener('click', () => {
                        this.trackEvent('button_click', button.textContent.trim());
                    });
                });
            }

            trackEvent(eventType, details = '') {
                if (typeof gtag !== 'undefined') {
                    gtag('event', eventType, {
                        'event_category': 'engagement',
                        'event_label': details,
                        'value': 1
                    });
                }

                // Update dashboard in real-time
                this.updateEventInDashboard(eventType, details);
            }

            updateEventInDashboard(eventType, details) {
                // Add to recent activity
                const activity = {
                    time: 'Just now',
                    event: this.formatEventName(eventType),
                    page: window.location.pathname,
                    device: this.getDeviceType(),
                    location: 'Unknown'
                };

                this.data.recentActivity.unshift(activity);
                if (this.data.recentActivity.length > 10) {
                    this.data.recentActivity.pop();
                }

                this.updateActivityTable();
            }

            formatEventName(eventType) {
                const eventNames = {
                    'form_submission': 'Form Submission',
                    'phone_call': 'Phone Call',
                    'button_click': 'Button Click',
                    'page_view': 'Page View'
                };
                return eventNames[eventType] || eventType;
            }

            getDeviceType() {
                const width = window.innerWidth;
                if (width <= 768) return 'Mobile';
                if (width <= 1024) return 'Tablet';
                return 'Desktop';
            }

            updateDashboard() {
                this.updateVisitorStats();
                this.updateCharts();
                this.updateTables();
            }

            updateVisitorStats() {
                document.getElementById('totalVisitors').textContent = this.data.visitors.total.toLocaleString();
                document.getElementById('mobileVisitors').textContent = this.data.visitors.mobile.toLocaleString();
                document.getElementById('desktopVisitors').textContent = this.data.visitors.desktop.toLocaleString();
                document.getElementById('bounceRate').textContent = this.data.engagement.bounceRate;
                document.getElementById('sessionDuration').textContent = this.data.engagement.sessionDuration;
                document.getElementById('pagesPerSession').textContent = this.data.engagement.pagesPerSession;
                document.getElementById('formSubmissions').textContent = this.data.conversions.formSubmissions.toLocaleString();
                document.getElementById('phoneCalls').textContent = this.data.conversions.phoneCalls.toLocaleString();
                document.getElementById('buttonClicks').textContent = this.data.conversions.buttonClicks.toLocaleString();
                document.getElementById('topSource').textContent = this.data.traffic.topSource;
                document.getElementById('topLocation').textContent = this.data.traffic.topLocation;
                document.getElementById('deviceBreakdown').textContent = this.data.traffic.deviceBreakdown;

                // Update change indicators
                document.getElementById('visitorsChange').textContent = this.data.visitors.change;
                document.getElementById('mobileChange').textContent = this.data.visitors.change;
                document.getElementById('desktopChange').textContent = this.data.visitors.change;
                document.getElementById('bounceChange').textContent = this.data.engagement.bounceChange;
                document.getElementById('durationChange').textContent = this.data.engagement.durationChange;
                document.getElementById('pagesChange').textContent = this.data.engagement.pagesChange;
                document.getElementById('formChange').textContent = this.data.conversions.formChange;
                document.getElementById('phoneChange').textContent = this.data.conversions.phoneChange;
                document.getElementById('clicksChange').textContent = this.data.conversions.clicksChange;
                document.getElementById('sourceChange').textContent = this.data.traffic.sourceChange;
                document.getElementById('locationChange').textContent = this.data.traffic.locationChange;
                document.getElementById('deviceChange').textContent = this.data.traffic.deviceChange;
            }

            updateCharts() {
                // Simple chart visualization
                const visitorChart = document.getElementById('visitorChart');
                visitorChart.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <h4>Visitor Trends</h4>
                        <p>üìà Daily visitors: 450-520</p>
                        <p>üìä Weekly growth: +12.5%</p>
                        <p>üéØ Peak hours: 2-4 PM EST</p>
                    </div>
                `;

                const funnelChart = document.getElementById('funnelChart');
                funnelChart.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <h4>Conversion Funnel</h4>
                        <p>üë• Visitors: 15,420</p>
                        <p>üìÑ Page Views: 49,344</p>
                        <p>üìù Form Starts: 2,847</p>
                        <p>‚úÖ Form Submissions: 1,247</p>
                        <p>üìû Phone Calls: 892</p>
                    </div>
                `;
            }

            updateTables() {
                this.updateActivityTable();
                this.updateSourcesTable();
                this.updateDeviceTable();
            }

            updateActivityTable() {
                const tbody = document.getElementById('activityTable');
                tbody.innerHTML = this.data.recentActivity.map(activity => `
                    <tr>
                        <td>${activity.time}</td>
                        <td>${activity.event}</td>
                        <td>${activity.page}</td>
                        <td>${activity.device}</td>
                        <td>${activity.location}</td>
                    </tr>
                `).join('');
            }

            updateSourcesTable() {
                const tbody = document.getElementById('sourcesTable');
                tbody.innerHTML = this.data.trafficSources.map(source => `
                    <tr>
                        <td>${source.source}</td>
                        <td>${source.visitors.toLocaleString()}</td>
                        <td>${source.bounceRate}</td>
                        <td>${source.avgSession}</td>
                        <td>${source.conversions.toLocaleString()}</td>
                    </tr>
                `).join('');
            }

            updateDeviceTable() {
                const tbody = document.getElementById('deviceTable');
                tbody.innerHTML = this.data.devicePerformance.map(device => `
                    <tr>
                        <td>${device.device}</td>
                        <td>${device.visitors.toLocaleString()}</td>
                        <td>${device.bounceRate}</td>
                        <td>${device.avgSession}</td>
                        <td>${device.conversionRate}</td>
                    </tr>
                `).join('');
            }
        }

        // Initialize dashboard
        let dashboard;
        document.addEventListener('DOMContentLoaded', () => {
            dashboard = new AnalyticsDashboard();
        });

        // Refresh data function
        function refreshData() {
            const loading = document.getElementById('loading');
            loading.style.display = 'block';
            
            setTimeout(() => {
                dashboard.loadAnalyticsData();
                dashboard.updateDashboard();
                loading.style.display = 'none';
            }, 1000);
        }

        // Auto-refresh every 5 minutes
        setInterval(refreshData, 300000);
    </script>
</body>
</html> 